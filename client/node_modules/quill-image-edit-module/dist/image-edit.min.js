!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ImageEdit=t():e.ImageEdit=t()}(this,(function(){return(()=>{"use strict";var e={996:e=>{var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===o}(e)}(e)},o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?s((o=e,Array.isArray(o)?[]:{}),e,t):e;var o}function r(e,t,o){return e.concat(t).map((function(e){return n(e,o)}))}function i(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function l(e,t){try{return t in e}catch(e){return!1}}function s(e,o,a){(a=a||{}).arrayMerge=a.arrayMerge||r,a.isMergeableObject=a.isMergeableObject||t,a.cloneUnlessOtherwiseSpecified=n;var u=Array.isArray(o);return u===Array.isArray(e)?u?a.arrayMerge(e,o,a):function(e,t,o){var r={};return o.isMergeableObject(e)&&i(e).forEach((function(t){r[t]=n(e[t],o)})),i(t).forEach((function(i){(function(e,t){return l(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(l(e,i)&&o.isMergeableObject(t[i])?r[i]=function(e,t){if(!t.customMerge)return s;var o=t.customMerge(e);return"function"==typeof o?o:s}(i,o)(e[i],t[i],o):r[i]=n(t[i],o))})),r}(e,o,a):n(o,a)}s.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,o){return s(e,o,t)}),{})};var a=s;e.exports=a}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};return(()=>{o.d(n,{default:()=>v});var e=o(996),t=o.n(e);const r={modules:["DisplaySize","Toolbar","Resize","Delete"],deleteText:"Delete",overlayStyles:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"},handleStyles:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"},displayStyles:{position:"absolute",font:"12px/1.0 Arial, Helvetica, sans-serif",padding:"4px 8px",textAlign:"center",backgroundColor:"white",color:"#333",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",cursor:"default"},deleteBtnStyles:{position:"absolute",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",fontSize:"12px",padding:"0 4px",height:"28px",lineHeight:"28px",background:"#000",color:"#fff",textAlign:"center",borderRadius:"5px"},deleteArrowStyles:{position:"absolute",display:"block",top:"-12px",left:"50%",width:"0",height:"0",border:"6px solid #000",borderColor:"transparent transparent #000 transparent",transform:"translate3d(-50%, 0, 0)"},toolbarStyles:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default"},toolbarButtonStyles:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"},toolbarButtonSvgStyles:{fill:"#444",stroke:"#444",strokeWidth:"2"}};var i,l=function(e){this.onCreate=function(){},this.onDestroy=function(){},this.onUpdate=function(){},this.overlay=e.overlay,this.img=e.img,this.hide=e.hide,this.remove=e.remove,this.options=e.options,this.requestUpdate=e.onUpdate},s=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});const a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onCreate=function(){t.display=document.createElement("div"),Object.assign(t.display.style,t.options.displayStyles),t.overlay.appendChild(t.display)},t.onUpdate=function(){if(t.display&&t.img){var e=t.getCurrentSize();if(t.display.innerHTML=e.join(" &times; "),e[0]>120&&e[1]>30)Object.assign(t.display.style,{right:"4px",bottom:"4px",left:"auto"});else if("right"==t.img.style.float){var o=t.display.getBoundingClientRect();Object.assign(t.display.style,{right:"auto",bottom:"-"+(o.height+4)+"px",left:"-"+(o.width+4)+"px"})}else o=t.display.getBoundingClientRect(),Object.assign(t.display.style,{right:"-"+(o.width+4)+"px",bottom:"-"+(o.height+4)+"px",left:"auto"})}},t.getCurrentSize=function(){return[t.img.width,Math.round(t.img.width/t.img.naturalWidth*t.img.naturalHeight)]},t}return s(t,e),t}(l),u='<svg viewbox="0 0 18 18">\n  <line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"></line>\n  <line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"></line>\n  <line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"></line>\n</svg>',c='<svg viewbox="0 0 18 18">\n  <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>\n  <line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"></line>\n  <line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"></line>\n</svg>',p='<svg viewbox="0 0 18 18">\n  <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>\n  <line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"></line>\n  <line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"></line>\n</svg>';var d=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onCreate=function(){t.toolbar=document.createElement("div"),Object.assign(t.toolbar.style,t.options.toolbarStyles),t.overlay.appendChild(t.toolbar),t._defineAlignments(),t._addToolbarButtons()},t._defineAlignments=function(){t.alignments=[{icon:u,apply:function(){t._setProperty("display","inline"),t._setProperty("float","left"),t._setProperty("margin","0 1em 1em 0")},isApplied:function(){return"left"===t._getProperty("float")}},{icon:c,apply:function(){t._setProperty("display","block"),t._setProperty("float",""),t._setProperty("margin","auto")},isApplied:function(){return"auto"===t._getProperty("margin")}},{icon:p,apply:function(){t._setProperty("display","inline"),t._setProperty("float","right"),t._setProperty("margin","0 0 1em 1em")},isApplied:function(){return"right"===t._getProperty("float")}}]},t._setProperty=function(e,o){t.img.style[t._camelize(e)]=o},t._getProperty=function(e){return t.img.style[t._camelize(e)]},t._removeProperty=function(e){t.img.style[t._camelize(e)]=""},t._addToolbarButtons=function(){var e=[];t.alignments.forEach((function(o,n){var r,i=document.createElement("span");e.push(i),i.innerHTML=o.icon,i.addEventListener("click",(function(){e.forEach((function(e){return e.style.filter=""})),o.isApplied()?(t._removeProperty("display"),t._removeProperty("margin"),t._removeProperty("float")):(t._selectButton(i),o.apply()),t.requestUpdate()})),Object.assign(i.style,t.options.toolbarButtonStyles),n>0&&(i.style.borderLeftWidth="0"),o.isApplied()&&t._selectButton(i),null===(r=t.toolbar)||void 0===r||r.appendChild(i)}))},t._selectButton=function(e){e.style.filter="invert(20%)"},t}return d(t,e),t.prototype._camelize=function(e){var t=e.split("-"),o=t.slice(1).map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("");return t[0]+o},t}(l);var y=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onCreate=function(){t.boxes=[],t.addBox("nwse-resize"),t.addBox("nesw-resize"),t.addBox("nwse-resize"),t.addBox("nesw-resize"),t.positionBoxes()},t.onDestroy=function(){t.setCursor("")},t.positionBoxes=function(){var e=-parseFloat(t.options.handleStyles.width)/2+"px",o=-parseFloat(t.options.handleStyles.height)/2+"px";[{left:e,top:o},{right:e,top:o},{right:e,bottom:o},{left:e,bottom:o}].forEach((function(e,o){Object.assign(t.boxes[o].style,e)}))},t.addBox=function(e){var o=document.createElement("div");Object.assign(o.style,t.options.handleStyles),o.style.cursor=e,o.style.width=t.options.handleStyles.width+"px",o.style.height=t.options.handleStyles.height+"px",o.addEventListener("mousedown",t.handleMousedown,!1),t.overlay.appendChild(o),t.boxes.push(o)},t.handleMousedown=function(e){t.dragBox=e.target,t.dragStartX=e.clientX,t.preDragWidth=t.img.width||t.img.naturalWidth,t.setCursor(t.dragBox.style.cursor),document.addEventListener("mousemove",t.handleDrag,!1),document.addEventListener("mouseup",t.handleMouseup,!1)},t.handleMouseup=function(){t.setCursor(""),document.removeEventListener("mousemove",t.handleDrag),document.removeEventListener("mouseup",t.handleMouseup)},t.handleDrag=function(e){if(t.img){var o=e.clientX-t.dragStartX;t.dragBox===t.boxes[0]||t.dragBox===t.boxes[3]?t.img.width=Math.round(t.preDragWidth-o):t.img.width=Math.round(t.preDragWidth+o),t.requestUpdate()}},t.setCursor=function(e){[document.body,t.img].forEach((function(t){t.style.cursor=e}))},t}return y(t,e),t}(l);var m=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),g={DisplaySize:a,Toolbar:f,Resize:h,Delete:function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onCreate=function(){t.deleteBtn=document.createElement("div"),t.deleteArrow=document.createElement("span"),Object.assign(t.deleteBtn.style,t.options.deleteBtnStyles),Object.assign(t.deleteArrow.style,t.options.deleteArrowStyles),t.deleteBtn.innerText=t.options.deleteText,t.deleteBtn.addEventListener("click",t.handleDelete),t.deleteBtn.appendChild(t.deleteArrow),t.overlay.appendChild(t.deleteBtn)},t.handleDelete=function(){t.img&&t.remove(),t.hide()},t}return m(t,e),t}(l)};const v=function(e,o){var n=this;void 0===o&&(o={}),this.initializeModules=function(){n.removeModules(),n.modules=n.moduleClasses.map((function(e){return new(g[e]||e)(n)})),n.modules.forEach((function(e){e.onCreate()})),n.onUpdate()},this.onUpdate=function(){n.repositionElements(),n.modules.forEach((function(e){e.onUpdate()}))},this.removeModules=function(){n.modules.forEach((function(e){e.onDestroy()})),n.modules=[]},this.handleClick=function(e){var t=e.target;if(t&&t.tagName&&"IMG"===t.tagName.toUpperCase()){if(n.img===t)return;n.img&&n.hide(),n.show(t)}else n.img&&n.hide()},this.show=function(e){n.img=e,n.showOverlay(),n.initializeModules()},this.showOverlay=function(){n.overlay&&n.hideOverlay(),n.quill.setSelection(null),n.setUserSelect("none"),document.addEventListener("keyup",n.checkImage,!0),n.quill.root.addEventListener("input",n.checkImage,!0),n.overlay=document.createElement("div"),Object.assign(n.overlay.style,n.options.overlayStyles),n.quill.root.parentNode.appendChild(n.overlay),n.repositionElements()},this.hideOverlay=function(){n.overlay&&(n.quill.root.parentNode.removeChild(n.overlay),n.overlay=void 0,document.removeEventListener("keyup",n.checkImage),n.quill.root.removeEventListener("input",n.checkImage),n.setUserSelect(""))},this.repositionElements=function(){if(n.overlay&&n.img){var e=n.quill.root.parentNode,t=n.img.getBoundingClientRect(),o=e.getBoundingClientRect();Object.assign(n.overlay.style,{left:t.left-o.left-1+e.scrollLeft+"px",top:t.top-o.top+e.scrollTop+"px",width:t.width+"px",height:t.height+"px"})}},this.remove=function(){var e;n.img&&(null===(e=n.img.parentNode)||void 0===e||e.removeChild(n.img))},this.hide=function(){n.hideOverlay(),n.removeModules(),n.img=void 0},this.setUserSelect=function(e){["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach((function(t){n.quill.root.style[t]=e,document.documentElement.style[t]=e}))},this.checkImage=function(e){n.img&&(46!=e.keyCode&&8!=e.keyCode||n.remove(),n.hide())},this.quill=e;var i=!1;o.modules&&(i=o.modules.slice()),this.options=t()(r,o),i&&(this.options.modules=i),document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.addEventListener("click",this.handleClick,!1),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.moduleClasses=this.options.modules,this.modules=[]}})(),n.default})()}));