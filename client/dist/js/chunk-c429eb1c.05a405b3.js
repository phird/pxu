(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c429eb1c"],{"4aea":function(t,s,e){"use strict";e("bd4b")},b808:function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"whole-site"},[e("div",{staticClass:"left-layout"},[t.success?e("a-alert",{attrs:{message:"บันทึกข้อมูลสำเร็จ",type:"success","show-icon":""}}):t._e(),t.nerror?e("a-alert",{attrs:{message:"โปรดใส่ข้อมูลให้ครบถ้วน",type:"error","show-icon":""}}):t._e(),e("div",{staticClass:"step-pills"},[e("div",{staticClass:"step-item",class:{active:t.isOne},on:{click:function(s){return t.goa(0)}}},[t._m(0),e("span",{staticClass:"text-pill"},[t._v(" ข้อมูลทั่วไป ")]),e("span",[e("b-icon",{attrs:{icon:"chevron-right"}})],1)]),e("div",{staticClass:"step-item",class:{active:t.isTwo},on:{click:function(s){return t.goa(1)}}},[t._m(1),e("span",{staticClass:"text-pill"},[t._v(" ข้อมูลเพิ่มเติม ")]),e("span",[e("b-icon",{attrs:{icon:"chevron-right"}})],1)]),e("div",{staticClass:"step-item",class:{active:t.isThree},on:{click:function(s){return t.goa(2)}}},[t._m(2),e("span",{staticClass:"text-pill"},[t._v(" เพิ่มขอบเขตงาน ")])])]),"0"==t.check?e("div",{staticClass:"form-group detail-section"},[e("todo",{attrs:{todos:t.todos,sumtodo:t.sumtodo,qID:t.qID,inv:t.inv}}),e("div",{staticClass:"nav-section"},[e("button",{staticClass:"nav-but",on:{click:function(s){return t.goa(1)}}},[t._v(" ต่อไป "),e("b-icon",{attrs:{icon:"chevron-right"}})],1)])],1):t._e(),"1"==t.check?e("div",{staticClass:"form-group detail-section"},[e("div",{staticClass:"set-Default"},[e("quotatuin-page-2",{attrs:{dateq:t.sumtodo.dateq,estatus:t.estatus},on:{"update-status":t.updateestatus}}),e("div",{staticClass:"nav-section"},[e("button",{staticClass:"nav-but nav-but-back",on:{click:function(s){return t.goa(0)}}},[t._v(" ก่อนหน้า ")]),e("button",{staticClass:"nav-but",on:{click:function(s){return t.goa(2)}}},[t._v("ต้อไป")])])],1)]):t._e(),"2"==t.check?e("div",{staticClass:"form-group detail-section"},[e("summernote",{attrs:{sumnote:t.sumnote},on:{"update-text":t.updatesum}}),e("div",{staticClass:"nav-section"},[e("button",{staticClass:"nav-but nav-but-back",on:{click:function(s){return t.goa(1)}}},[t._v("ก่อนหน้า")])])],1):t._e()],1),e("div",{staticClass:"right-layout"},[e("div",{staticClass:"right-layout-panel"},[e("div",{staticClass:"container-panel"},["0"==t.check?e("button",{staticClass:"btn btn-outline-success",attrs:{type:"button",disabled:""}},[t._v(" บันทึก ")]):t._e(),"1"==t.check?e("button",{staticClass:"btn btn-outline-success",attrs:{type:"button",disabled:""}},[t._v(" บันทึก ")]):t._e(),"2"==t.check?e("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:t.submit}},[t._v(" บันทึก ")]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:t.cancel}},[t._v(" ยกเลิก ")])])])])])},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"num-pill"},[e("span",[t._v("1")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"num-pill"},[e("span",[t._v("2")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"num-pill"},[e("span",[t._v("3")])])}],a=e("1da1"),n=(e("96cf"),e("b680"),e("b0c0"),e("a3b3")),c=e("681a"),u=e("1968"),r=e("c1df"),d=e.n(r),h=e("bc3a"),l=e.n(h),m=new Date,b=d()(m).add(543,"year").format("YY-MM-"),p={name:"Quotation",components:{Todo:n["a"],Summernote:c["a"],QuotatuinPage2:u["a"]},created:function(){this.getid(),this.getwebsite()},data:function(){return{todos:[],sumtodo:{statusvat:"vatใน",totalnow:0,total:0,vat7:0,payment:0,tax3:0,cusstatus:"",customerID:"",employeeID:"",quoname:"",dateq:"",noteq:"",qIN:"1",checkedit:!1},sumnote:"",isOne:!0,isTwo:!1,isThree:!1,qID:"",estatus:!1,check:"0",inv:{IN1:100,IN2:0,IN3:0},inID:"",web:[],success:!1,nerror:!1}},methods:{cancel:function(){window.confirm("คุณแน่ใจใช่ไหมที่จะยกเลิกรายการนี้")&&history.back()},goa:function(t){"0"==t?(this.isOne=!0,this.isTwo=!1,this.isThree=!1):"1"==t?(this.isTwo=!0,this.isOne=!1,this.isThree=!1):(this.isThree=!0,this.isOne=!1,this.isTwo=!1),console.log(this.isOne),console.log(this.isTwo),console.log(this.isThree),this.check=t,console.log(this.check)},updatesum:function(t){this.sumnote=t},updateestatus:function(t){this.estatus=t},submitquo:function(){var t=this;l.a.post("http://128.199.187.173:5000/quotation",{qID:this.qID,cID:this.sumtodo.customerID,eID:this.sumtodo.employeeID,date:this.sumtodo.dateq,noteq:this.sumtodo.noteq,qName:this.sumtodo.quoname,qIN:this.sumtodo.qIN,vatstatus:this.sumtodo.statusvat,customerstatus:this.sumtodo.cusstatus,total:this.sumtodo.total.toFixed(2),payment:this.sumtodo.payment.toFixed(2),address:this.web.address,subd:this.web.subdistrict,d:this.web.district,prov:this.web.province,postcode:this.web.postcode,taxNumber:this.web.taxNumber,companyName:this.web.companyName,companyNumber:this.web.companyNumber,estatus:this.estatus,summernote:this.sumnote}).then((function(){t.success=!0,setTimeout((function(){t.$router.back()}),300)}))},submit:function(){if(console.log(this.sumtodo.total),0==this.sumtodo.total||""==this.sumtodo.customerID||""==this.sumtodo.quoname||""==this.sumtodo.dateq)this.nerror=!0;else{var t=[];console.log(this.todos);for(var s=0,e=1;e<=this.sumtodo.qIN;e++){this.inID=this.qID+"-"+e;var o=void 0;1==this.sumtodo.qIN&&1==e||2==this.sumtodo.qIN&&1==e?o=this.inv.IN1/100:2==this.sumtodo.qIN&&2==e?o=this.inv.IN2/100:3==this.sumtodo.qIN&&1==e?o=this.inv.IN1/100:3==this.sumtodo.qIN&&2==e?o=this.inv.IN2/100:3==this.sumtodo.qIN&&3==e&&(o=this.inv.IN3/100),t[e-1]=l.a.post("http://128.199.187.173:5000/invoice",{inID:this.inID,qID:this.qID,cID:this.sumtodo.customerID,eID:this.sumtodo.employeeID,num:e,vatstatus:this.sumtodo.statusvat,customerstatus:this.sumtodo.cusstatus,total:(this.sumtodo.total*o).toFixed(2),payment:(this.sumtodo.payment*o).toFixed(2),address:this.web.address,subd:this.web.subdistrict,d:this.web.district,prov:this.web.province,postcode:this.web.postcode,taxNumber:this.web.taxNumber,companyName:this.web.companyName,companyNumber:this.web.companyNumber,estatus:this.estatus}),s=e,console.log(s)}for(var i=0;i<this.todos.length;i++)t[s+i]=l.a.post("http://128.199.187.173:5000/scope",{qID:this.qID,name:this.todos[i].name,price:this.todos[i].price,quantity:this.todos[i].quantity});l.a.all([t]).then(this.submitquo())}},getid:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var e,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,l.a.put("http://128.199.187.173:5000/quotation/qid",{to:b});case 3:e=s.sent,0==e.data[0].num?t.qID=b+"001":e.data[0].num>=10?t.qID=b+"0"+(e.data[0].num+1):t.qID=b+"00"+(e.data[0].num+1),o=new Date,t.sumtodo.dateq=String(d()(o).add(543,"year").format("DD/MM/YYYY")),s.next=12;break;case 9:s.prev=9,s.t0=s["catch"](0),console.log(s.t0);case 12:case"end":return s.stop()}}),s,null,[[0,9]])})))()},getwebsite:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var e;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,l.a.get("http://128.199.187.173:5000/website");case 3:e=s.sent,t.web=e.data[0],console.log(t.web),s.next=11;break;case 8:s.prev=8,s.t0=s["catch"](0),console.log(s.t0);case 11:case"end":return s.stop()}}),s,null,[[0,8]])})))()}}},v=p,f=(e("4aea"),e("0c7c")),w=Object(f["a"])(v,o,i,!1,null,"4442add6",null);s["default"]=w.exports},bd4b:function(t,s,e){}}]);
//# sourceMappingURL=chunk-c429eb1c.05a405b3.js.map