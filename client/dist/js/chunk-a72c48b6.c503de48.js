(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a72c48b6"],{"25f0":function(t,o,s){"use strict";var a=s("6eeb"),e=s("825a"),n=s("d039"),u=s("ad6d"),i="toString",c=RegExp.prototype,r=c[i],m=n((function(){return"/a/b"!=r.call({source:"a",flags:"b"})})),d=r.name!=i;(m||d)&&a(RegExp.prototype,i,(function(){var t=e(this),o=String(t.source),s=t.flags,a=String(void 0===s&&t instanceof RegExp&&!("flags"in c)?u.call(t):s);return"/"+o+"/"+a}),{unsafe:!0})},"7ef1":function(t,o,s){"use strict";s("c95a")},b2b1:function(t,o,s){"use strict";s.r(o);var a=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"whole-site"},[s("div",{staticClass:"left-layout"},[t.success?s("a-alert",{attrs:{message:"บันทึกข้อมูลสำเร็จ",type:"success","show-icon":""}}):t._e(),s("div",{staticStyle:{color:"red"}},[t._v(" ***จำเป็นต้องกำหนดค่าใบวางบิลทุกครั้งที่ทำการแก้ไข ")]),s("div",{staticClass:"step-pills"},[s("div",{staticClass:"step-item",class:{active:t.isOne},on:{click:function(o){return t.goa(0)}}},[t._m(0),s("span",{staticClass:"text-pill"},[t._v(" ข้อมูลทั่วไป ")]),s("span",[s("b-icon",{attrs:{icon:"chevron-right"}})],1)]),s("div",{staticClass:"step-item",class:{active:t.isTwo},on:{click:function(o){return t.goa(1)}}},[t._m(1),s("span",{staticClass:"text-pill"},[t._v(" ข้อมูลเพิ่มเติม ")]),s("span",[s("b-icon",{attrs:{icon:"chevron-right"}})],1)]),s("div",{staticClass:"step-item",class:{active:t.isThree},on:{click:function(o){return t.goa(2)}}},[t._m(2),s("span",{staticClass:"text-pill"},[t._v(" เพิ่มขอบเขตงาน ")])])]),"0"==t.check?s("div",{staticClass:"form-group detail-section"},[s("todo",{attrs:{todos:t.todos,sumtodo:t.sumtodo,qID:t.qID,inv:t.inv,changein:t.changein},on:{updatechan:t.updatechan}}),s("div",{staticClass:"nav-section"},[s("button",{staticClass:"nav-but",on:{click:function(o){return t.goa(1)}}},[t._v(" ต่อไป "),s("b-icon",{attrs:{icon:"chevron-right"}})],1)])],1):t._e(),"1"==t.check?s("div",{staticClass:"form-group detail-section"},[s("div",{staticClass:"set-Default"},[s("quotatuin-page-2",{attrs:{dateq:t.sumtodo.dateq,estatus:t.estatus},on:{"update-status":t.updateestatus}}),s("div",{staticClass:"nav-section"},[s("button",{staticClass:"nav-but nav-but-back",on:{click:function(o){return t.goa(0)}}},[t._v(" ก่อนหน้า ")]),s("button",{staticClass:"nav-but",on:{click:function(o){return t.goa(2)}}},[t._v("ต้อไป")])])],1)]):t._e(),"2"==t.check?s("div",{staticClass:"form-group detail-section"},[s("summernote",{attrs:{sumnote:t.sumnote},on:{"update-text":t.updatesum}}),s("div",{staticClass:"nav-section"},[s("button",{staticClass:"nav-but nav-but-back",on:{click:function(o){return t.goa(1)}}},[t._v("ก่อนหน้า")])])],1):t._e()],1),s("div",{staticClass:"right-layout"},[s("div",{staticClass:"right-layout-panel"},[s("div",{staticClass:"container-panel"},[s("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:t.submit}},[t._v(" บันทึก ")]),s("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:t.cancel}},[t._v(" ยกเลิก ")])])])])])},e=[function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"num-pill"},[s("span",[t._v("1")])])},function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"num-pill"},[s("span",[t._v("2")])])},function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"num-pill"},[s("span",[t._v("3")])])}],n=s("1da1"),u=(s("96cf"),s("b680"),s("b0c0"),s("d3b7"),s("25f0"),s("a3b3")),i=s("681a"),c=s("1968"),r=s("bc3a"),m=s.n(r),d=(s("c1df"),{name:"Quotation",components:{Todo:u["a"],Summernote:i["a"],QuotatuinPage2:c["a"]},created:function(){this.qID=this.$route.params.id,this.getid(this.qID),this.getscope(this.qID)},data:function(){return{quotation:[],todos:[],sumtodo:{statusvat:"vatใน",totalnow:0,total:0,vat7:0,payment:0,tax3:0,cusstatus:"",customerID:"",employeeID:"",quoname:"",dateq:"",noteq:"",qIN:"1",checkedit:!0},sumnote:"",isOne:!0,isTwo:!1,isThree:!1,qID:"",estatus:!1,check:"0",inv:{IN1:100,IN2:0,IN3:0},inID:"",numindex:0,changein:!1,success:!1}},methods:{cancel:function(){window.confirm("คุณแน่ใจใช่ไหมที่จะยกเลิกรายการนี้")&&history.back()},goa:function(t){"0"==t?(this.isOne=!0,this.isTwo=!1,this.isThree=!1):"1"==t?(this.isTwo=!0,this.isOne=!1,this.isThree=!1):(this.isThree=!0,this.isOne=!1,this.isTwo=!1),this.check=t},updatesum:function(t){this.sumnote=t},updateestatus:function(t){this.estatus=t},updatechan:function(t){this.changein=t},submitquo:function(){var t=this;console.log("payment"),console.log(this.sumtodo.payment),m.a.post("https://pxu-server.herokuapp.com/quotation/".concat(this.qID),{eID:this.sumtodo.employeeID,date:this.sumtodo.dateq,noteq:this.sumtodo.noteq,qName:this.sumtodo.quoname,qIN:this.sumtodo.qIN,vatstatus:this.sumtodo.statusvat,total:this.sumtodo.total.toFixed(2),payment:this.sumtodo.payment.toFixed(2),estatus:this.estatus,summernote:this.sumnote}).then((function(){t.success=!0,setTimeout((function(){t.$router.back()}),500)}))},submit:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function o(){var s,a,e,n,u;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!t.changein){o.next=13;break}return o.next=3,m.a.delete("https://pxu-server.herokuapp.com/scope/".concat(t.qID));case 3:return o.next=5,m.a.delete("https://pxu-server.herokuapp.com/invoice/".concat(t.qID));case 5:for(s=[],console.log(t.todos),a=1;a<=t.sumtodo.qIN;a++)t.inID=t.qID+"-"+a,e=void 0,1==t.sumtodo.qIN&&1==a||2==t.sumtodo.qIN&&1==a?e=t.inv.IN1/100:2==t.sumtodo.qIN&&2==a?e=t.inv.IN2/100:3==t.sumtodo.qIN&&1==a?e=t.inv.IN1/100:3==t.sumtodo.qIN&&2==a?e=t.inv.IN2/100:3==t.sumtodo.qIN&&3==a&&(e=t.inv.IN3/100),s[a-1]=m.a.post("https://pxu-server.herokuapp.com/invoice",{inID:t.inID,qID:t.qID,cID:t.sumtodo.customerID,eID:t.sumtodo.employeeID,num:a,vatstatus:t.sumtodo.statusvat,customerstatus:t.sumtodo.cusstatus,total:(t.sumtodo.total*e).toFixed(2),payment:(t.sumtodo.payment*e).toFixed(2),address:t.quotation.address,subd:t.quotation.subdistrict,d:t.quotation.district,prov:t.quotation.province,postcode:t.quotation.postcode,taxNumber:t.quotation.taxNumber,companyName:t.quotation.wcompanyName,companyNumber:t.quotation.wcompanyNumber,estatus:t.estatus});for(n=[],u=0;u<t.todos.length;u++)n[u]=m.a.post("https://pxu-server.herokuapp.com/scope",{qID:t.qID,name:t.todos[u].name,price:t.todos[u].price,quantity:t.todos[u].quantity}),console.log(t.todos.length),console.log(n[u]);m.a.all([s,n]).then(t.submitquo()),o.next=14;break;case 13:t.submitquo();case 14:case"end":return o.stop()}}),o)})))()},getid:function(t){var o=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,m.a.get("https://pxu-server.herokuapp.com/quotation/".concat(t));case 3:a=s.sent,o.quotation=a.data[0],o.sumtodo.quoname=o.quotation.quotationName,o.sumtodo.customerID=o.quotation.customerID,o.sumtodo.employeeID=o.quotation.employeeID,o.sumtodo.dateq=o.quotation.datequotation,o.sumnote=o.quotation.summernote,o.sumtodo.noteq=o.quotation.notequotation,o.sumtodo.payment=o.quotation.paymentPrice,o.sumtodo.total=o.quotation.totalpricequo,o.sumtodo.cusstatus=o.quotation.customerstatus,o.sumtodo.statusvat=o.quotation.vatstatus,"0"==o.quotation.estatus?o.estatus=!1:o.estatus=!0,"นิติบุคคล"==o.sumtodo.cusstatus?"vatนอก"==o.sumtodo.statusvat?(o.sumtodo.totalnow=o.sumtodo.total,o.sumtodo.vat7=.07*o.sumtodo.total,o.sumtodo.tax3=.03*o.sumtodo.total):"vatใน"==o.sumtodo.statusvat&&(o.sumtodo.totalnow=100*o.sumtodo.total/107,o.sumtodo.vat7=o.sumtodo.total-o.sumtodo.totalnow,o.sumtodo.tax3=.03*o.sumtodo.totalnow):"vatนอก"==o.sumtodo.statusvat?(o.sumtodo.totalnow=o.sumtodo.total,o.sumtodo.vat7=.07*o.sumtodo.total,o.sumtodo.tax3=0):"vatใน"==o.sumtodo.statusvat&&(o.sumtodo.totalnow=100*o.sumtodo.total/107,o.sumtodo.vat7=o.sumtodo.total-o.sumtodo.totalnow,o.sumtodo.tax3=0),o.sumtodo.qIN=o.quotation.quantityinstallment.toString(),s.next=23;break;case 20:s.prev=20,s.t0=s["catch"](0),console.log(s.t0);case 23:case"end":return s.stop()}}),s,null,[[0,20]])})))()},getscope:function(t){var o=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,m.a.get("https://pxu-server.herokuapp.com/scope/".concat(t));case 3:a=s.sent,o.todos=a.data,console.log(o.todos),s.next=11;break;case 8:s.prev=8,s.t0=s["catch"](0),console.log(s.t0);case 11:case"end":return s.stop()}}),s,null,[[0,8]])})))()}}}),l=d,p=(s("7ef1"),s("0c7c")),v=Object(p["a"])(l,a,e,!1,null,"2b108e2a",null);o["default"]=v.exports},c95a:function(t,o,s){}}]);
//# sourceMappingURL=chunk-a72c48b6.c503de48.js.map