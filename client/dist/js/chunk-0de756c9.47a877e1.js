(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0de756c9"],{"922f":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"whole-site"},[e.nerror?i("a-alert",{attrs:{message:"โปรดใส่ข้อมูลให้ครบถ้วน",type:"error","show-icon":""}}):e._e(),e.success?i("a-alert",{attrs:{message:"บันทึกข้อมูลสำเร็จ",type:"success","show-icon":""}}):e._e(),i("div",{staticClass:"header-site"},[i("b-icon",{attrs:{icon:"chevron-left"},on:{click:e.backward}})],1),i("div",{staticClass:"body-section"},[i("div",{staticClass:"previewimg-section"},[e.tempimgslip!=e.imgslip?i("div",{staticClass:"imagePreviewWrapper",style:{"background-image":"url("+e.previewImage+")"},on:{click:e.selectImage}},[i("b-icon",{staticStyle:{color:"black"},attrs:{icon:"card-image"}})],1):i("div",[i("img",{staticClass:"imagePreviewWrapper",attrs:{src:"https://pxu-server.herokuapp.com/slip/"+e.imgslip,alt:""}})])]),i("div",{staticClass:"date-section"},[i("span",[e._v("วันที่ ")]),i("span",[i("date-picker",{attrs:{valueType:"format",format:e.thFormat},model:{value:e.daterec,callback:function(t){e.daterec=t},expression:"daterec"}})],1)]),i("div",{staticClass:"uploadFile-section"},[i("div",{staticClass:"upload-slip"},[i("input",{ref:"fileInput",attrs:{type:"file"},on:{input:e.pickFile}})]),i("button",{staticClass:"btn btn-outline-success confirm-slip",on:{click:e.submit}},[e._v(" แนบสลิป ")])])])],1)},a=[],r=i("1da1"),c=(i("96cf"),i("b0c0"),i("bc3a")),n=i.n(c),o=i("c1df"),p=i.n(o),l={data:function(){return{thFormat:{stringify:function(e){return e?p()(e).add(543,"year").format("DD/MM/YYYY"):null},parse:function(e){return e?p()(e,"DD/MM/YYYY").subtract(543,"year").toDate():null}},previewImage:"../../public/images/istockphoto-1147544806-170667a.jpg",daterec:"",fileimg:[],imgslip:"",tempimgslip:"",inID:"",success:!1,nerror:!1}},created:function(){this.inID=this.$route.params.id,this.getimg(this.inID)},methods:{backward:function(){history.back()},submit:function(){var e=this;if(""==this.imgslip||""==this.daterec)this.nerror=!0;else{var t=new FormData;t.append("files",this.fileimg),n.a.post("https://pxu-server.herokuapp.com/uploadslip",t,{}),n.a.post("https://pxu-server.herokuapp.com/invoice/re/changestatus/".concat(this.inID)),n.a.post("https://pxu-server.herokuapp.com/invoice/re/".concat(this.inID),{imgslip:this.imgslip,daterec:this.daterec}).then((function(){e.success=!0,setTimeout((function(){e.$router.back()}),500)}))}},selectImage:function(){this.$refs.fileInput.click()},pickFile:function(){var e=this,t=this.$refs.fileInput,i=t.files;if(i&&i[0]){var s=new FileReader;s.onload=function(t){e.previewImage=t.target.result},s.readAsDataURL(i[0]),console.log(i[0]),this.fileimg=i[0],this.imgslip=this.fileimg.name,this.$emit("input",i[0])}},getimg:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,n.a.get("https://pxu-server.herokuapp.com/invoice/re/".concat(e));case 3:s=i.sent,""==s.data[0].datereceipt?(a=new Date,t.daterec=p()(a).add(543,"year").format("DD/MM/YYYY")):t.daterec=s.data[0].datereceipt,t.imgslip=s.data[0].imgslip,t.tempimgslip=s.data[0].imgslip,i.next=12;break;case 9:i.prev=9,i.t0=i["catch"](0),console.log(i.t0);case 12:case"end":return i.stop()}}),i,null,[[0,9]])})))()}}},u=l,m=(i("9b56"),i("0c7c")),d=Object(m["a"])(u,s,a,!1,null,"ab4d6844",null);t["default"]=d.exports},"9b56":function(e,t,i){"use strict";i("b526")},b526:function(e,t,i){}}]);
//# sourceMappingURL=chunk-0de756c9.47a877e1.js.map