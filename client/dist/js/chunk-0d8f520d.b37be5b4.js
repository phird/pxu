(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d8f520d"],{"1af2":function(t,e,i){},"754a":function(t,e,i){"use strict";i("1af2")},"922f":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"whole-site"},[t.nerror?i("a-alert",{attrs:{message:"โปรดใส่ข้อมูลให้ครบถ้วน",type:"error","show-icon":""}}):t._e(),t.success?i("a-alert",{attrs:{message:"บันทึกข้อมูลสำเร็จ",type:"success","show-icon":""}}):t._e(),i("div",{staticClass:"header-site"},[i("b-icon",{attrs:{icon:"chevron-left"},on:{click:t.backward}})],1),i("div",{staticClass:"body-section"},[i("div",{staticClass:"previewimg-section"},[t.tempimgslip!=t.imgslip?i("div",{staticClass:"imagePreviewWrapper",style:{"background-image":"url("+t.previewImage+")"},on:{click:t.selectImage}},[i("b-icon",{staticStyle:{color:"black"},attrs:{icon:"card-image"}})],1):i("div",[i("img",{staticClass:"imagePreviewWrapper",attrs:{src:"http://128.199.187.173:5000/slip/"+t.imgslip,alt:""}})])]),i("div",{staticClass:"date-section"},[i("span",[t._v("วันที่ ")]),i("span",[i("date-picker",{attrs:{valueType:"format",format:t.thFormat},model:{value:t.daterec,callback:function(e){t.daterec=e},expression:"daterec"}})],1)]),i("div",{staticClass:"uploadFile-section"},[i("div",{staticClass:"upload-slip"},[i("input",{ref:"fileInput",attrs:{type:"file"},on:{input:t.pickFile}})]),i("button",{staticClass:"btn btn-outline-success confirm-slip",on:{click:t.submit}},[t._v(" แนบสลิป ")])])])],1)},s=[],c=i("1da1"),r=(i("96cf"),i("b0c0"),i("bc3a")),n=i.n(r),o=i("c1df"),l=i.n(o),p={data:function(){return{thFormat:{stringify:function(t){return t?l()(t).add(543,"year").format("DD/MM/YYYY"):null},parse:function(t){return t?l()(t,"DD/MM/YYYY").subtract(543,"year").toDate():null}},previewImage:"../../public/images/istockphoto-1147544806-170667a.jpg",daterec:"",fileimg:[],imgslip:"",tempimgslip:"",inID:"",success:!1,nerror:!1}},created:function(){this.inID=this.$route.params.id,this.getimg(this.inID)},methods:{backward:function(){history.back()},submit:function(){var t=this;if(""==this.imgslip||""==this.daterec)this.nerror=!0;else{var e=new FormData;e.append("files",this.fileimg),n.a.post("http://128.199.187.173:5000/uploadslip",e,{}),n.a.post("http://128.199.187.173:5000/invoice/re/changestatus/".concat(this.inID)),n.a.post("http://128.199.187.173:5000/invoice/re/".concat(this.inID),{imgslip:this.imgslip,daterec:this.daterec}).then((function(){t.success=!0,setTimeout((function(){t.$router.back()}),500)}))}},selectImage:function(){this.$refs.fileInput.click()},pickFile:function(){var t=this,e=this.$refs.fileInput,i=e.files;if(i&&i[0]){var a=new FileReader;a.onload=function(e){t.previewImage=e.target.result},a.readAsDataURL(i[0]),console.log(i[0]),this.fileimg=i[0],this.imgslip=this.fileimg.name,this.$emit("input",i[0])}},getimg:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var a,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,n.a.get("http://128.199.187.173:5000/invoice/re/".concat(t));case 3:a=i.sent,""==a.data[0].datereceipt?(s=new Date,e.daterec=l()(s).add(543,"year").format("DD/MM/YYYY")):e.daterec=a.data[0].datereceipt,e.imgslip=a.data[0].imgslip,e.tempimgslip=a.data[0].imgslip,i.next=12;break;case 9:i.prev=9,i.t0=i["catch"](0),console.log(i.t0);case 12:case"end":return i.stop()}}),i,null,[[0,9]])})))()}}},u=p,d=(i("754a"),i("0c7c")),m=Object(d["a"])(u,a,s,!1,null,"5975dffc",null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-0d8f520d.b37be5b4.js.map